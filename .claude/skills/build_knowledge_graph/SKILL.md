---
name: build_knowledge_graph
description: 从文档中提取知识点并构建知识图谱，支持单文档学习路径构建和多文档实体关系挖掘
tools: [Read, Write, Edit]
---

# build_knowledge_graph - 知识图谱构建器

## 🎯 核心功能

从文档中提取知识点并构建知识图谱，支持两种模式：
1. **单文档模式**：提取知识点，构建学习路径和知识体系
2. **多文档模式**：抽取实体和关系，构建跨文档的知识关联网络

## 📋 工作流SOP

**工作流SOP**：
```
1. 接收文档集合
2. 分析构建模式（单文档/多文档）
3. 提取知识点和实体
4. 识别关系和关联
5. 构建图谱结构
6. 验证图谱完整性
7. 返回知识图谱
```

### 详细流程说明

**步骤1：接收文档集合**
- 验证输入文档的完整性和有效性
- 检查文档数量和内容的合理性
- 解析构建模式（单文档学习路径 vs 多文档实体关系）
- 记录文档集合基本信息

**步骤2：分析构建模式**
- 判断文档数量和内容类型
- 单文档模式：专注知识点提取和学习路径构建
- 多文档模式：专注实体关系挖掘和跨文档关联
- 生成模式分析结果

**步骤3：提取知识点和实体**
- **单文档模式**：识别核心概念、定义、事实、流程等结构化知识
- **多文档模式**：识别命名实体（人员、组织、概念等）和属性
- 提取关键信息和特征
- 生成提取结果集合

**步骤4：识别关系和关联**
- **单文档模式**：建立知识点之间的层级和依赖关系
- **多文档模式**：分析实体在文本中的共现和语义关系
- 识别关系类型和强度
- 生成关系候选集合

**步骤5：构建图谱结构**
- 创建节点（知识点/实体）和边（关系）
- 构建图谱的邻接矩阵
- 建立属性和映射关系
- 生成初步知识图谱

**步骤6：验证图谱完整性**
- 检查节点和边的完整性
- 验证图谱的逻辑一致性
- 检测循环引用和矛盾关系
- 计算一致性评分

**步骤7：返回知识图谱**
- 生成标准化的图谱数据结构
- 包含节点、边、属性集合
- 提供图谱度量指标
- 返回完整的知识图谱

## 🚀 快速开始

### 基本使用（单文档模式）
```
使用 build_knowledge_graph 从培训材料构建学习路径
文档内容：新员工入职培训手册
构建模式：单文档学习路径
```

### 基本使用（多文档模式）
```
使用 build_knowledge_graph 构建HR政策知识图谱
文档集合：年假政策、病假政策、产假政策
构建模式：多文档实体关系
```

### 支持的图谱类型
- **学习路径图谱**：知识点、概念、定义、流程
- **实体关系图谱**：人员、组织、概念等实体及关系
- **混合图谱**：结合学习路径和实体关系

## 📋 输入规范

### 必需输入
```json
{
  "documents": [
    {
      "doc_id": "doc_001",
      "content": "员工年假管理规定..."
    }
  ],
  "build_mode": "single_doc_learning_path"
}
```

### 可选输入
```json
{
  "entity_types": {
    "person": ["员工", "主管", "HR"],
    "concept": ["年假", "病假", "产假"]
  },
  "knowledge_domains": ["公司文化", "规章制度", "工作流程"]
}
```

## 📤 输出内容

### 标准输出
```json
{
  "knowledge_graph": {
    "nodes": [
      {
        "node_id": "node_001",
        "type": "knowledge_point",
        "name": "年假",
        "definition": "员工根据工作年限享有的带薪休假",
        "category": "假期管理"
      }
    ],
    "edges": [
      {
        "edge_id": "edge_001",
        "from": "node_001",
        "to": "node_002",
        "type": "prerequisite",
        "strength": 0.9
      }
    ]
  },
  "graph_metrics": {
    "node_count": 25,
    "edge_count": 40,
    "connectivity": 0.85,
    "coverage_rate": 0.87
  },
  "learning_path": {
    "prerequisites": ["node_001", "node_002"],
    "learning_sequence": ["node_001", "node_002", "node_003"]
  }
}
```

## 📊 质量指标

- **知识点提取准确率**: ≥88%（目标值）
- **实体识别准确率**: ≥90%（目标值）
- **关系抽取准确率**: ≥85%（目标值）
- **图谱一致性**: ≥92%（目标值）

---

**build_knowledge_graph** - 智能构建知识图谱，揭示知识关联！ 🕸️