# search_knowledge_base - 详细参考文档

## 📋 工作流SOP详细说明

### 标准执行流程
```
1. 接收搜索请求 → 2. 深度理解查询意图 → 3. 识别检索模式 → 4. 查询语义泛化与扩展 → 5. 执行多维度搜索 → 6. 计算相关度评分 → 7. 排序搜索结果 → 8. 过滤重复内容 → 9. 返回排序结果
```

### 详细流程说明

#### 步骤1：接收搜索请求
- 验证搜索关键词的有效性
- 检查搜索过滤条件的合理性
- 解析返回数量和排序偏好
- 记录搜索请求基本信息

#### 步骤2：深度理解查询意图
- **语义解析**：使用NLP技术分析查询的深层语义结构
- **意图分类**：识别查询类型（事实型、流程型、对比型、条件型等）
- **实体识别**：提取查询中的关键实体（政策名称、流程节点、时间等）
- **上下文理解**：结合用户角色、历史查询等上下文信息
- **需求推断**：推断用户未明确表达但隐含的需求
- 生成查询意图分析报告

#### 步骤3：识别检索模式
- **通用检索模式**：标准知识库搜索
- **版本检索模式**：带版本控制的知识检索
- 根据输入参数自动识别模式
- 生成模式识别结果

#### 步骤4：查询语义泛化与扩展
- **同义词扩展**：基于知识库标签体系扩展查询同义词
- **概念泛化**：将具体查询泛化为相关概念（如"年假"→"假期管理"）
- **关联查询生成**：基于知识图谱生成相关查询建议
- **查询意图强化**：通过上下文信息强化查询意图表达
- **多维度查询构建**：构建关键词、语义、标签等多维度查询
- 生成扩展后的查询集合

#### 步骤5：执行多维度搜索
- 执行关键词全文搜索
- 执行语义相似度搜索
- 执行标签分类搜索
- 执行知识图谱搜索
- 执行意图驱动搜索
- 执行智能联想搜索
- 综合多维度搜索结果

#### 步骤6：计算相关度评分
- 计算关键词匹配度（基础分）
- 评估语义相似度（语义分）
- 计算意图匹配度（意图分）
- 评估标签相关度（标签分）
- 考虑用户上下文权重（上下文分）
- 计算时效性权重（时间分）
- 生成综合相关度评分（加权融合）

#### 步骤7：排序搜索结果
- 按综合相关度评分排序
- 考虑知识的热度和时效性
- 应用用户偏好调整
- 生成排序后的结果列表

#### 步骤8：过滤重复内容
- 识别重复和相似内容
- 合并重复结果
- 选择最优版本
- 生成去重后的结果

#### 步骤9：返回排序结果
- 生成结构化的搜索结果
- 包含知识ID、标题、摘要、相关度
- 提供总结果数和搜索耗时
- 返回完整的搜索结果

---

## 🔍 查询意图理解详解

### 意图分类体系
1. **事实型查询**：寻求具体事实信息（如"年假天数是多少"）
2. **流程型查询**：寻求操作步骤和流程（如"如何申请年假"）
3. **对比型查询**：比较不同选项（如"年假和病假有什么区别"）
4. **条件型查询**：基于条件的查询（如"试用期员工能否申请年假"）

### 实体识别类型
- **政策实体**：政策名称、制度名称
- **流程实体**：流程节点、操作步骤
- **时间实体**：日期、时间段、时间节点
- **角色实体**：用户角色、部门名称
- **条件实体**：条件限制、适用范围

---

## 🎯 多维度搜索机制

### 搜索维度
1. **关键词维度**：传统的全文关键词匹配
2. **语义维度**：基于语义理解的相似度匹配
3. **标签维度**：基于知识标签的分类搜索
4. **意图维度**：基于查询意图的精准匹配
5. **图谱维度**：基于知识图谱的关系搜索
6. **上下文维度**：基于用户上下文的个性化搜索

### 相关度评分权重
- **关键词匹配度**：30%（基础权重）
- **语义相似度**：25%（语义权重）
- **意图匹配度**：20%（意图权重）
- **标签相关度**：15%（标签权重）
- **上下文权重**：10%（个性化权重）

---

## 📊 质量评估标准

### 搜索质量指标
- **搜索响应时间**: ≤2秒（目标值）
- **首条结果相关度**: ≥85%（目标值）
- **搜索成功率**: ≥95%（目标值）
- **版本检索准确率**: ≥95%（目标值）
- **上下文一致性**: ≥90%（目标值）
- **历史完整性**: ≥95%（目标值）

### 持续优化机制
- **用户反馈收集**：收集用户对搜索结果的相关性反馈
- **查询日志分析**：分析查询模式和搜索结果点击率
- **A/B测试**：对比不同搜索策略的效果
- **模型迭代**：基于反馈数据持续优化意图理解模型

---

**文档版本**: v2.0  
**最后更新**: 2025-11-27